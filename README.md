# HashiMom

HashiMom is a minimal health tracking application designed for mothers managing hypothyroidism.

This MVP includes the following core features:

- **Lab Tracking** – record lab tests and results so you have a clear picture of your thyroid function over time.
- **Symptom Log** – capture day‑to‑day symptoms to help you and your healthcare provider spot patterns.
- **Medication Log** – track medications, doses and times to stay on top of your regimen.
- **Trend Charts** – visualize labs, symptoms and medications together to understand how they relate (Recharts).
- **Gluten Snap** – upload a food photo and check for gluten content via a third‑party model.
- **Daily AI Encouragement** – receive a positive message generated by AI to help you stay motivated.

The project is structured as a mono‑repo with separate `frontend` and `backend` directories. All business logic lives in the backend, while the React frontend handles user interaction and display.

## Project Structure

```
hashimom_project/
├── backend/    # Flask + SQLAlchemy application
├── frontend/   # React + Vite + TypeScript client
├── instance/   # SQLite DB lives here by default
└── README.md   # Project introduction and development guide
```

## Getting Started

The backend and frontend are independent services and can be run separately.

### Backend

1) Create a virtual environment

```bash
cd backend
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate
```

2) Install dependencies

```bash
pip install -r requirements.txt
```

3) Start the server (recommended)

```bash
python app.py  # http://localhost:5001
```

- The app factory is `app:create_app()`. Running `python app.py` starts the dev server on port 5001 with CORS enabled for `localhost:5173`.
- Alternative: `flask run` will default to port 5000, but make sure the frontend `VITE_API_BASE` points to the right port if you use this path.

### Frontend

1) Install dependencies

```bash
cd frontend
npm install
```

2) Start the development server

```bash
npm run dev  # http://localhost:5173
```

By default the frontend talks to the backend at `http://localhost:5001/api` (configurable via `VITE_API_BASE`).

## API

- `GET /api/profile` → returns current user's pregnancy profile. If none exists, returns an empty profile
- `PUT /api/profile` → upsert profile
- `GET /api/labs`, `POST /api/labs`, **DELETE /api/labs/:id** (new)
- `GET /api/symptoms`, `POST /api/symptoms`, **DELETE /api/symptoms/:id** (new)
- `GET /api/medications`, `POST /api/medications`
- `GET /api/gluten_scans`, `POST /api/gluten_scans`, **DELETE /api/gluten_scans/:id** (new)
- `POST /api/food_chat`
- `GET /api/ai_messages/encouragement`

### Example profile response

```
{
  "lmp_date": null,
  "due_date": null,
  "high_risk_notes": "",
  "gestational_age_weeks": null,
  "trimester": "-"
}
```

## What’s New (Aug 2025)

- Dashboard
  - Event Correlation Map as the primary view (labs + symptoms + gluten) with real time‑scale X axis
  - Cluster highlight redesign: gray band + round "more" badge; hover summary and clickable Drawer; overlapping clusters auto‑merged
  - Embedded centered Legend Panel with toggles; added quick entry cards below for Lab History and Symptom History
- History Pages
  - Lab History and Symptom History now have per‑row Delete actions (labs and symptoms)
- Gluten Snap
  - Recent Photos support per‑item delete with confirmation modal (removes server record and local history)
- Add Entry
  - Removed “Quick Actions” block to simplify the page

## Contributing

- Keep the architecture clean and modular.
- Do not log any personal health information (PHI).
- Prefer `localhost` over `127.0.0.1` in development to avoid SameSite cookie issues.
- Update this README and `PROJECT_INSTRUCTIONS.md` when interfaces or run commands change.

## License

This project is for educational and prototyping purposes and does not include a production license. Use it responsibly and consult with a healthcare professional before making medical decisions.
